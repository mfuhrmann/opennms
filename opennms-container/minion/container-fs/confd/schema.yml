---
# Minion configuration schema

# Notes:
# - The frontend may want to just fetch the categories first and then fetch the contents of each category separately
# lazily
#
# - Types to use:
# host
# port
# host-with-port
# properties
# set
# enum
# indexed
# string
#
# Example of generated input:
# {[
#     {
#         "key": "/a/b/c",
#         "value": "1.1.1.1"
#     },
#     {
#         "key": "/d/e/f",
#         "values": [
#             {
#                 "key": "this-key",
#                 "value": "myString"
#             }
#         ]
# ]}

# Version of Minion this schema configuration is applicable to
version: "foo"

# The root set of categories
categories:
  # General
  - name: "general"
    description: "TODO"
    config:
      # TODO: Should this key be hidden too?
      - name: "instance-id"
        type:
          name: "string"
          validation: "TODO"
        description: "TODO"
        tip: "TODO"
        key: "/org.opennms.instance.id"
        example: "TODO"

    categories:
      - name: "controller"
        description: "TODO"
        tags:
          - "maas-hide"
        config:
          - name: "location"
            type:
              name: "string"
              validation: "TODO"
            description: "TODO"
            tip: "TODO"
            key: "/location"
            example: "TODO"
          - name: "id"
            type:
              name: "string"
              validation: "TODO"
            description: "TODO"
            tip: "TODO"
            key: "/id"
            example: "TODO"
          - name: "broker-url"
            type:
              name: "url"
            description: "TODO"
            tip: "TODO"
            key: "/broker-url"
            example: "TODO"
          - name: "http-url"
            type:
              name: "url"
            description: "TODO"
            tip: "TODO"
            key: "/http-url"
            example: "TODO"

  # Dominion
  - name: "dominion"
    description: "TODO"
    tags:
      - "maas-hide"
    categories:
      - name: "grpc"
        description: "TODO"
        config:
          - name: "host"
            type:
              name: "host"
            description: "TODO"
            tip: "TODO"
            key: "/dominion/grpc/host"
            example: "TODO"
          - name: "port"
            type:
              name: "port"
            description: "TODO"
            tip: "TODO"
            key: "/dominion/grpc/port"
            example: "TODO"
          - name: "client-secret"
            type:
              name: "string"
            description: "TODO"
            tip: "TODO"
            key: "/dominion/grpc/client-secret"
            example: "TODO"
      - name: "scv"
        description: "TODO"
        config:
          - name: "provider"
            type:
              name: "string"
            description: "TODO"
            tip: "TODO"
            key: "/scv/provider"
            example: "TODO"

  # Karaf
  - name: "karaf"
    description: "TODO"
    categories:
      - name: "management"
        description: "TODO"
        categories:
          - name: "rmi"
            description: "TODO"
            config:
              - name: "registry-host"
                type:
                  name: "host"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/management/rmi/registry/host"
                example: "TODO"
              - name: "registry-port"
                type:
                  name: "port"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/management/rmi/registry/port"
                example: "TODO"
              - name: "server-host"
                type:
                  name: "host"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/management/rmi/server/host"
                example: "TODO"
              - name: "server-port"
                type:
                  name: "port"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/management/rmi/server/port"
                example: "TODO"

      - name: "shell"
        description: "TODO"
        categories:
          - name: "ssh"
            description: "TODO"
            config:
              - name: "host"
                type:
                  name: "host"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/shell/ssh"
                example: "TODO"
              - name: "port"
                type:
                  name: "port"
                description: "TODO"
                tip: "TODO"
                key: "/karaf/shell/port"
                example: "TODO"

  # Minion Environment
  - name: "environment"
    description: "TODO"
    # TODO: Find out if this type is correct
    config:
      - name: "java-opts"
        type:
          name: "indexed"
          # TODO: What are the keys type's supposed to be?
          items:
            type:
              name: "string"
        description: "TODO"
        tip: "TODO"
        key: "/process-env/java-opts"
        example: "TODO"

  # IPC Configuration
  - name: "ipc"
    description: "TODO"
    categories:
      # IPC Configuration :: AWS
      - name: "aws"
        description: "TODO"
        config:
          - name: "properties"
            description: "TODO"
            config:
              - name: "properties"
                type:
                  name: "properties"
                description: "TODO"
                tip: "TODO"
                key: "/aws"
                example: "TODO"
        categories:
          - name: "sqs"
            description: "TODO"
            config:
              - name: "properties"
                type:
                  name: "properties"
                description: "TODO"
                tip: "TODO"
                key: "/ipc/sqs"
                example: "TODO"

      # IPC Configuration :: gRPC
      - name: "grpc"
        description: "TODO"
        config:
          - name: "host"
            type:
              name: "host-with-port"
            description: "TODO"
            tip: "TODO"
            key: "/ipc/grpc/host"
            example: "TODO"
          - name: "Properties"
            type:
              name: "properties"
            description: "Additional gRPC configuration properties for IPC gRPC"
            tip: "TODO"
            key: "/ipc/grpc"
            example: "TODO"

      # IPC Configuration :: RPC
      - name: "rpc"
        description: "TODO"
        categories:
          # IPC Configuration :: RPC :: Kafka
          - kafka:
            config:
              - name: "Bootstrap servers"
                type:
                  name: "set"
                  items:
                    type:
                      name: "host-with-port"
                    separator: ","
                description: "Kafka bootstrap servers for IPC RPC"
                tip: "TODO"
                key: "/ipc/rpc/kafka/bootstrap.servers"
                example: "TODO"
              - name: "Properties"
                type:
                  name: "properties"
                description: "Additional Kafka configuration properties for IPC RPC"
                tip: "TODO"
                key: "/ipc/rpc/kafka"
                example: "TODO"

      # IPC Configuration :: Sink
      - name: "sink"
        description: "TODO"
        config:
          - name: "offheap"
            type:
              name: "properties"
            description: "TODO"
            tip: "TODO"
            key: "/ipc/sink/offheap"
            example: "TODO"

        categories:
          # IPC Configuration :: Sink :: Kafka
          - name: "kafka"
            config:
              - name: "Bootstrap servers"
                type:
                  name: "set"
                  items:
                    type:
                      name: "host-with-port"
                    separator: ","
                description: "Kafka bootstrap servers for IPC Sink"
                tip: "TODO"
                key: "/ipc/sink/kafka/bootstrap.servers"
                example: "TODO"
              - name: "Properties"
                type:
                  name: "properties"
                description: "Additional Kafka configuration properties for IPC Sink"
                tip: "TODO"
                key: "/ipc/sink/kafka"
                example: "TODO"

  # Netmgt
  - name: "netmgt"
    description: "TODO"
    categories:
      # Netmgt :: Traps
      - name: "traps"
        description: "TODO"
        config:
          - name: "Properties"
            type:
              name: "properties"
            description: "TODO"
            tip: "TODO"
            key: "/netmgt/traps"
            example: "TODO"
      # Netmgt :: Syslog
      - name: "syslog"
        description: "TODO"
        config:
          - name: "Properties"
            type:
              name: "properties"
            description: "TODO"
            tip: "TODO"
            key: "/netmgt/syslog"
            example: "TODO"

  # Web
  - name: "web"
    description: "TODO"
    categories:
      # Web :: Jetty
      - name: "jetty"
        description: "TODO"
        config:
          - name: "HTTP listen port"
            type:
              name: "port"
            description: "Jetty HTTP listen port"
            tip: "TODO"
            key: "/jetty/web/port"
            example: "TODO"
          - name: "Listen addresses"
            type:
              name: "set"
              items:
                type:
                  name: "host"
                separator: ","
            description: "Jetty listen addresses"
            tip: "TODO"
            key: "/jetty/web/host"
            example: "TODO"
